!function t(e,r,n){function o(i,u){if(!r[i]){if(!e[i]){var a="function"==typeof require&&require;if(!u&&a)return a(i,!0);if(s)return s(i,!0);throw new Error("Cannot find module '"+i+"'")}var c=r[i]={exports:{}};e[i][0].call(c.exports,function(t){var r=e[i][1][t];return o(r?r:t)},c,c.exports,t,e,r,n)}return r[i].exports}for(var s="function"==typeof require&&require,i=0;i<n.length;i++)o(n[i]);return o}({1:[function(t,e,r){!function(t){"use strict";e.exports={getBrokerStatus:function(){return new Promise(function(e,r){t.fetch("/getBrokerStatus").then(function(t){return 404===t.status?r({status:t.status,message:"offline"}):500===t.status?r({status:t.status,message:"error"}):e({status:t.status,message:"online"})},function(t){r(t)})})},initBroker:function(){return new Promise(function(e,r){t.fetch("/initBroker").then(function(t){return 500===t.status?r({status:t.status,message:"broker with problems"}):e({status:t.status,message:"broker online"})},function(t){r(t)})})},subscribeTopic:function(t){return new Promise(function(e,r){fetch("/subscribeTopic",{method:"POST",body:t}).then(function(t){return 500===t.status?r({status:t.status,message:"subscription error"}):e({status:t.status,message:"subscription ok"})},function(t){r(t)})})}}}(window)},{}],2:[function(t,e,r){!function(){"use strict";var e=t("./factory.script"),r={brokerStatus:document.getElementById("broker"),initBrokerBtn:document.getElementById("init-broker")},n={prepareFormData:function(){var t=new FormData;t.set("type","raspberry"),t.set("device_id","+"),t.set("evt","+"),t.set("fmt","json")}};console.log("asdd");var o=n.prepareFormData();r.initBrokerBtn.addEventListener("click",function(){e.initBroker().then(function(){console.log("broker initialized"),e.subscribeTopic(o).then(function(t){console.log(t)})})}),e.getBrokerStatus().then(function(t){console.log(t),r.brokerStatus.style.backgroundColor="green",r.brokerStatus.innerHTML=t.message},function(t){r.brokerStatus.style.backgroundColor="red",r.brokerStatus.innerHTML=t.message,console.log(t)})}()},{"./factory.script":1}]},{},[2]);